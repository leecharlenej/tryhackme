# Metasploit: Exploitation Basics
Use Metasploit for scanning, vulnerability assessment and exploitation.

## Content:
[Task 1: Introduction](#task-1-introduction)
<br>[Task 2: Scanning](#task-2-scanning)
<br>[Task 3: Metasploit Database](#task-3-metasploit-database)
<br>[Task 4: Vulnerability Scanning](#task-4-vulnerability-scanning)
<br>[Task 5: Exploitation](#task-5-exploitation)
<br>[Task 6: Msfvenom](#task-6-msfvenom)
<br>[To note](#to-note)

## Task 1: Introduction
| Term | Description |
|------|-------------|
| Metasploit usage| To scan target systems and to conduct vulnerability scan. |
| Database feature | To manage pentration testing engagements with a broader scope. |
| msfvenom | To generate payloads and start Meterpreter session on target system. |

To note:
<ul>
<li>TryHackMe - For attacks that require wordlist: <code>/usr/share/wordlists/MetasploitRoom/MetasploitWordlist.txt</code></li>
<li>To run Metasploit: <code>msfconsole</code></li>
</ul>

## Task 2: Scanning
<ol>
<li>Port Scanning</li>
<li>UDP service Identification</li>
<li>SMB Scans</li>
<li>Other scans</li>
<li>THM Questions</li>
</ol>

<u><b>Port Scanning</b></u>
<br>Metasploit has several modules to scan open ports on target system and network.
| Term | Description |
|------|-------------|
| To list potential port scanning modules available. | Command line: ` search portscan`<br>Need to set a few options (`show options`):<ul><li><b>CONCURRENCY:</b> No. of targets to be scanned simultaneously.</li><li><b>PORTS:</b> Port range to be scanned. To note: Nmap '1-1000' scans the 1000 most used ports. Metasploit '1-1000' scans port numbers from 1 to 10000.</li><li><b>RHOSTS:</b> Target or target network to be scanned.</li><li><b>THREADS:</b> No. of threads used to simultaneously. More threads, faster scans.</li></ul> |
|To perform Nmap scans from msfconsole directly. | Command line: `nmap -sS 10.10.12.229 `<br>Nmap is a network discovery and security-auditing tool; use it to find hosts and services on a network, discover open ports, identify running services/ versions, detect OSes and run scripted checks (E.g. vulnerability or info-gathering scripts.) |

<u><b>UDP service Identification</b></u>
<br>Module: `scanner/discovery/udp_sweep` quickly identifies services running over UDP. Will not conduct an extensive scan of all possible UDP services but provides a quick way to idnetify services such as DNS or NetBIOS.

| Command | Action |
|---------|---------|
| `use auxiliary/scanner/discovery/udp_sweep`<br>`run` | To run UDB service identification scan. |

<u><b>SMB Scans</b></u>
<br>Metasploit offers several auxiliary modules to scan specific services, for e.g. SMB. Modules: `smb_enumshares` and `smb_version` - Useful for corporate network.

<u><b>Other scans</b></u>
<ul><li><b>NetBIOS (Network Basic Input Output System):</b> Similar to SMB; allows computers to communicate over network to share files or send files to printer. NetBIOS name of target system can give idea of its role/ importance (E.g. CORP-DC, DEVOPS, SALES.). May also come across shared files and folders that can be accessedd without password or protected with simple password (E.g. admin, administrator, root, toor.).</li>
<li>Metasploit has many modules to help you better understadn target system and find vulnerabilities. Worth performing quick search to see if any modules can be helpful based on target system.</li>
</ul>

<u><b>THM Questions</b></u>
| Question | Answer |
|---------|---------|
| How many ports are open on the target system? | `msfconsole`<br><br>`nmap -sS <target_machine_IP>`<br>`nmap -sS 10.10.38.182`<br><br>or<br><br>`search portscan`<br>`use use auxiliary/scanner/portscan/tcp`<br>`show options`<br>`set rhost 10.10.38.182`<br>`run` |
| Using the relevant scanner, what NetBIOS name can you see? | `search netbios`<br>`use auxiliary/scanner/netbios/nbname`<br>`set RHOSTS 10.10.38.18`|
| What is running on port 8000?<br><ul><li>Port 8000 used for web servers and HTTP-based applications, so research HTTP version modules in Metasploit.</li></ul> | `back`<br>`search http_version`<br>`use 0`<br>`show options`<br>`set rhost 10.10.38.182`<br>`set rport 8000`<br>`run` |
| What is the "penny" user's SMB password? Use the wordlist mentioned in the previous task. | `back`<br>`search smb_login`<br>`use 0`<br>`set rhost 10.10.38.182`<br>`set smbuser penny`<br>`set pass_file /usr/share/wordlists/MetasploitRoom/MetasploitWordlist.txt`<br>`run` |

## Task 3: Metasploit Database
## Task 4: Vulnerability Scanning
## Task 5: Exploitation
## Task 6: Msfvenom
## To note