# Metasploit: Introduction
## Content:
<ul><li>Task 1: Introduction to Metasploit</li><li>Task 2: Main components of Metasploit</li><li>Task 3: Msfconsole</li><li>Task 4: Working with modules</li></ul>

## Task 1: Introduction to Metasploit
| Term | Description |
|------|-------------|
| Metasploit Pro | Commercial version that can do automation and task management. GUI interface. |
| Metasploit Framework | Open-source version that works from command line. Used for penetration testing, vulnerability research and exploit development. |
| Metasploit Framework's main components | <ul><li><b>msfconsole:</b> Main command-line interface.</li><li><b>Modules:</b> Supporting modules such as exploits, scanners, payloads.</li><li><b>Tools:</b> Stand-alone tools to help with penetration testing or vulnerability research/ assessment. E.g. msfvenom, pattern_create, pattern_offset.</li></ul> |

## Task 2: Main components of Metasploit
| Term | Description |
|------|-------------|
| To launch Metasploit console | Command line: `msfconsole` |
| Modules | Small components within Metasploit built to perform specific task, such as exploiting vulnerability, scanning target, performing brute-force attack. |
| Recap concepts | <ul><li><b>Exploit:</b> Piece of code that uses vulnerability present on target system.</li><li><b>Vulnerability:</b> Design/ coding or logic flaw affecting target system. Exploit of vulnerability can result in disclosing confidential info or allowing attackers to execute code on target system.</li><li><b>Payload:</b> Code that run on target system. Exploit will take advanatge of vulnerability. However, if want to exploit to have result (= gain access to target system, read confidential info etc.), then need to use payload.</li></ul><br>Modules and categories under each are listed below. BUT will be interacting them through Metasploit console instead. </br> |
| Auxillary | Command line: `/opt/metasploit-framework/embedded/framework/modules# tree -L 1 auxiliary/auxiliary/`<br>Supporting modules such as scanners, crawlers, fuzzers.</br> |
| Encoders | Command line: `/opt/metasploit-framework/embedded/framework/modules# tree -L 1 encoders/encoders/` <br>Encode exploit and payload so that signature-based AV solution might miss them. Signature-based AV solutions have database of known threats; detect threats by comparing suspicious files to this database and raise alerts. Thus, encoders can have limited success rate as AV solutions can perform additional checks.</br> |
| Evasion | Command line: `/opt/metasploit-framework/embedded/framework/modules# tree -L 2 evasion/evasion/` <br>Encoders encode payload but shouldn't be considered as direct attempt to evade AV software. Evasion modules are.</br> |
| Exploits | Command line: `/opt/metasploit-framework/embedded/framework/modules# tree -L 1 exploits/exploits/` <br>Organized by target system.</br> |
| NOPs (No OPeration) | Command line: `/opt/metasploit-framework/embedded/framework/modules# tree -L 1 nops/nops/` <br>Do nothing; used as a buffer to achieve consistent payload sizes. Represented in Intel x86 CPU fam with 0x90, following which CPU will do nth for 1 cycle.</br> |
| Payloads | Command line: `/opt/metasploit-framework/embedded/framework/modules# tree -L 1 payloads/payloads/` <br>Codes that run on target system. Exploits leverage vulnerability on target system but to achieve result, need payload. E.g. getting a shell, loading malware/ backdoor on target system, running command, launching calc.exe as POC to add to penetration test report.</br><br>Benign way to show can run commands on target system: Start calculator on target system remotely by launching calc.exe application.</br><br>Running command on target system is alr an impt step, but having interactive connection to allow typing of commands that will execute on target system is better. Interactive command line = shell. Metasploit can send diff payloads that can open shells on target system.</br><br>4 diff directories:<ul><li><b>Adapters:</b> Wraps single payloads to convert them into diff formats. E.g. normal single payload can be wrapped inside a PowerShell adapter, which will make a single powershell command that will execute the payload.</li><li><b>Singles:</b> Self-contained payloads (E.g. add user, launch notepad.exe) that don't need additional component to run.</li><li><b>Stagers:</b> Set up connection channel between Metasploit and target system. Useful when working with staged payloads; staged payloads first upload a stager on target system, then download rest of payload (= stage). Provides advantage as inital size of payload is small compared with full payload being sent at once.</li><li><b>Stages:</b> Downloaded by stager to allow usgae of larger-sized payloads.</li></ul></br><br>Metasploit's naming helps identify single/ inline payloads vs. staged payloads.<ul><li><b>`generic/shell_reverse_tcp`:</b> Single/ inline payload as indicated by '_' between 'shell' and 'reverse'.</li><li><b>`windows/x64/shell/reverse_tcp`:</b> Staged payload, as indicated by '/' between 'shell' and 'reverse'.</li></ul></br> |
| Post | Command line: `/opt/metasploit-framework/embedded/framework/modules# tree -L 1 post/post/` <br>Modules useful for final sage of penetration testing process = post-exploitation.</br> |

## Task 3: Msfconsole
## Task 4: Working with modules
